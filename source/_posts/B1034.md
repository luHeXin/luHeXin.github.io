---
title: PAT B1034 有理数四则运算 (20分)
date: 2021-01-04 18:35:10
tags:
- PAT
categories: PAT 乙级
---
# 题目描述
本题要求编写程序，计算 2 个有理数的和、差、积、商。

# 输入格式：
输入在一行中按照 a1/b1 a2/b2 的格式给出两个分数形式的有理数，其中分子和分母全是整型范围内的整数，负号只可能出现在分子前，分母不为 0。
# 输出格式：
分别在 4 行中按照 有理数1 运算符 有理数2 = 结果 的格式顺序输出 2 个有理数的和、差、积、商。注意输出的每个有理数必须是该有理数的最简形式 k a/b，其中 k 是整数部分，a/b 是最简分数部分；若为负数，则须加括号；若除法分母为 0，则输出 Inf。题目保证正确的输出中没有超过整型范围的整数。
# 输入样例 1：
2/3 -4/2
# 输出样例 1：
2/3 + (-2) = (-1 1/3)
2/3 - (-2) = 2 2/3
2/3 * (-2) = (-1 1/3)
2/3 / (-2) = (-1/3)
# 输入样例 2：
5/3 0/6
# 输出样例 2：
1 2/3 + 0 = 1 2/3
1 2/3 - 0 = 1 2/3
1 2/3 * 0 = 0
1 2/3 / 0 = Inf
<hr/>


# 参考代码：
``` c++
#include<cstdio>
#include<iostream>
#include<algorithm>
#include<cmath>
 
using namespace std;

//最大公因式,分数化简 
//递归式：gcd(a,b)=gcd(b,a%b)
//递归边界：gcd(a,0)=a; 
long long gcd(long long a,long long b) {
	if(b==0) return a;
	else return gcd(b,a%b);
}

struct fraction {
	long long up;
	long long down;
};
//分数化简 
fraction reduction(fraction result) {
	//分母小于零，分子分母变为相反数 
	if(result.down<0){
		result.down*=-1;
		result.up*=-1; 
	}	
	//分子为零，分母变为1
	if(result.up==0){
		result.down=1;
	}else{//分子分母同除最大公因数，化简
		long long temp=gcd(abs(result.up),abs(result.down));
		result.up/=temp;
		result.down/=temp; 
	}
	return result;
}
//分数相加，最后输出化简后的结果 
fraction add(fraction f1,fraction f2){
	fraction result;
	result.up=f1.down*f2.up+f1.up*f2.down;
	result.down=f1.down*f2.down;
	return reduction(result);
}
//减
fraction sub(fraction f1,fraction f2){
	fraction result;
	result.up=f1.up*f2.down-f1.down*f2.up;
	result.down=f1.down*f2.down;
	return reduction(result);
} 
//乘
fraction mult(fraction f1,fraction f2){
	fraction result;
	result.up=f1.up*f2.up;
	result.down=f1.down*f2.down;
	return reduction(result);
} 
//除
fraction divide(fraction f1,fraction f2){
	fraction result;
	result.up=f1.up*f2.down;
	result.down=f1.down*f2.up;
	return reduction(result);
} 
//分数输出
void show(fraction f){
	f=reduction(f);
	if(f.up<0) printf("(");
	
	//整数 
	if(f.down==1)  printf("%lld",f.up); 
	//假分数
	else if(abs(f.up)>f.down) {//化简之后f.down是正数，但是f.up不确定 
		printf("%lld %lld/%lld",f.up/f.down,abs(f.up)%f.down,f.down);
	}else{//真分数
		printf("%lld/%lld",f.up,f.down);
	}
	
	if(f.up<0) printf(")");
} 
int main() {
	fraction a,b;
	scanf("%lld/%lld %lld/%lld",&a.up,&a.down,&b.up,&b.down);
	//加法 
	show(a);
	printf(" + ");
	show(b);
	printf(" = ");
	show(add(a,b)); 
	printf("\n");
	//减法 
	show(a);
	printf(" - ");
	show(b);
	printf(" = ");
	show(sub(a,b)); 
	printf("\n");
	//乘法 
	show(a);
	printf(" * ");
	show(b);
	printf(" = ");
	show(mult(a,b));
	printf("\n"); 
	//除法 
	show(a);
	printf(" / ");
	show(b);
	printf(" = ");
	if(b.up==0) printf("Inf"); 
	else show(divide(a,b)); 

	return 0;
}
```


