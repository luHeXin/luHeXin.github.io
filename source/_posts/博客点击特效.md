---
title: 博客美化_点击特效的实现
date: 2019-07-30 17:19:45
tags:
    - 点击特效
    - JS
categories: 博客美化
---
# 简介

本博客基于Hexo博客框架，主题选择的是NexT( [NexT使用文档](http://theme-next.iissnan.com/))。通过使用jQuery，为博客添加点击特效。<br/>
<hr/>

# 思路

1. 通过jQuery click()函数，获取html标签中点击的事件，并调用相应方法

``` js
$("html").click(function(e) {
}
```

2. 内置一个数组用来存储点击时出现的内容，通过jQuery设置返回的元素内容

``` js
var a = new Array("奋斗!!!","努力!!!","Learning~","Coding~","Summarizing~","Advancing~","VENI","VIDI","VICI","٩(•̤̀ᵕ•̤́๑)ᵒᵏᵎᵎᵎᵎ");
var i = $("<span></span>").text(a[a_index]);
a_index = (a_index + 1) % a.length;
```
在这里jQuery返回的数组内容顺序是按照数组a[0]有序读到最后的。
若将
``` js
a_index = (a_index + 1) % a.length;
```
替换为
``` js
a_index = Math.round(Math.random()*a.length);
```
则将随机返回数组内的内容。

3. 获取点击时鼠标的位置，将横纵坐标分别存储在变量x、y中。并在css中添加字体特效颜色，以及出现字体的位置。

``` js
var x = e.pageX,y = e.pageY;
i.css({
    "z-index": 66666666666666666666666666666666666666666666666666666666666,
    "top": y -10,
    "left": x,
    "position": "absolute",
    "font-weight": "bold",
    "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"
    });
```
这里为保证特效不被遮挡一次设置一个较大的z-index。字体出现的初始位置为鼠标点击位置正上方10单位的位置上.

4. 将字体添加到html中

``` js
$("html").append(i);
```

5. 通过jQuery animate()方法制作点击特效

``` js
i.animate({
    "top": y-180 ,
    "opacity": 0
    },
    1500,
    function() {
        i.remove();
    });
```
在这里设置动画的效果为特效字体从鼠标点击位置开始逐渐向上180个单位，上升的过程中逐渐淡化，在1.5秒后消失。
<hr/>

# 完整代码

```js
var a_index = 0;
jQuery(document).ready(function($) {
    $("html").click(function(e) {
        var a = new Array("奋斗!!!","努力!!!","Learning~","Coding~","Summarizing~","Advancing~","VENI","VIDI","VICI","٩(•̤̀ᵕ•̤́๑)ᵒᵏᵎᵎᵎᵎ");
        var i = $("<span></span>").text(a[a_index]);
        a_index = (a_index + 1) % a.length;
       // a_index = Math.round(Math.random()*a.length);//随机出现点击内容
        var x = e.pageX,
        y = e.pageY;
        i.css({
            "z-index": 66666666666666666666666666666666666666666666666666666666666,
            "top": y -10,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"
        });
        $("html").append(i);
        i.animate({
            "top": y - 180 ,
            "opacity": 0
        },
        1500,
        function() {
            i.remove();
        });
    });
});
```
<hr/>

# 相关配置

由于此博客选择的主题是NexT，因此有关的配置我也以NexT为例。


1. 将上述js代码命名为special-effect.js，并移动到如下目录：
`\themes\next\source\js`


2. 在如下路径：
`\themes\next\layout\layout.swig`
找到倒数第二行的</body>标签的前面添加如下代码

``` js
{% if theme.special-effect %}
<script type="text/javascript" src="/js/special-effect.js"></script>
{% endif %}
```


3. 在主题配置文件（\themes\next\_congig.yml）末尾加入：

```
#special-effect
special-effect: true
```