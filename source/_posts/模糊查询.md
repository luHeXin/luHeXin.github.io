---
title: 模糊查询
date: 2021-01-07 11:02:23
tags: SQL
categories: SQL
---
# 定义
模糊搜索的定义主要有两种观点。<br/>
* 一是系统允许被搜索信息和搜索提问之间存在一定的差异，这种差异就是“模糊”在搜索中的含义。例如，查找名字Smith时，就会找出与之相似的Smithe， Smythe， Smyth， Smitt等。<br/>
* 二是实质上的搜索系统自动进行的同义词搜索。同义词由系统的管理界面配置。例如，配置“计算机”与“computer”为同义词后，搜索“计算机”，则包含“computer”的网页也会出现在搜索结果中。<br/>

一般模糊查询语句如下：
```SQL
SELECT 字段 FROM 表 WHERE 字段 Like 条件
```
# 常见用法
## %
表示任意0个或多个字符。可匹配任意类型和长度的字符，有些情况下若是中文，使用两个百分号（% %）表示。

比如
 
 `SELECT * FROM [user] WHERE name LIKE '%张%';`

将会把name中含有“三”的记录全找出来。例如张xx，x张x，xx张（%可表示多个字符)。

如果需要找name中既有“张”又有“三”的记录，使用and条件

`SELECT * FROM [user] WHERE name LIKE '%张%' AND name LIKE '%三%';`


若使用 

`SELECT * FROM [user] WHERE name LIKE '%张%三%';`


只能搜索出 x张三，张x三，张三x。

## _ 
表示任意单个字符。匹配单个任意。
比如

 `SELECT * FROM [user] WHERE name LIKE '_三_';`


只找出“张三丰”这样name为三个字且中间一个字是“三”的。

## [ ] 
表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。

比如

` SELECT * FROM [user] WHERE name LIKE '[张李王]三';`


将找出“张三”、“李三”、“王三”（而不是“张李王三”）；

如 [ ] 内有一系列字符（01234、abcde之类的）则可略写为“0-4”、“a-e”

`SELECT * FROM [user] WHERE name LIKE '老[1-9]';`


将找出“老1”、“老2”、……、“老9”；

## [^ ] 
表示不在括号所列之内的单个字符。其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。

比如

` SELECT * FROM [user] WHERE name LIKE '[^张李王]三';`


将找出不姓“张”、“李”、“王”的“赵三”、“孙三”等；


`SELECT * FROM [user] WHERE name LIKE '老[^1-4]';`


将排除“老1”到“老4”，寻找“老5”、“老6”、……

# 参考文章
https://www.cnblogs.com/parable/p/11225717.html